import{I as t,H as e}from"./pkg.05bd79f5.js";import{n as s}from"./index.91c1d8ee.js";import"./vendor.3a85f146.js";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"runshell-wrapper"},[s("div",{staticClass:"runshell-container"},[t._m(0),t._v(" "),s("div",{staticClass:"runshell-step1"},[s("div",{staticClass:"input-container"},[s("t-form",{ref:"form",staticClass:"base-form",attrs:{labelAlign:"left"},on:{reset:t.onReset,submit:t.onSubmit}},[s("t-form-item",{attrs:{label:"命令",name:"des"}},[s("t-textarea",{staticClass:"run-textarea",attrs:{name:"command"},model:{value:t.textareaValue,callback:function(e){t.textareaValue=e},expression:"textareaValue"}})],1),t._v(" "),s("t-form-item",[s("t-button",{attrs:{theme:"primary",type:"submit"}},[t._v("提交")]),t._v(" "),s("t-button",{attrs:{type:"reset",theme:"default",variant:"base"}},[t._v("取消")])],1)],1)],1)])])])};a._withStripped=!0;const r={};var n=s({name:"runshell-base",components:{},data:()=>({textareaValue:"/bin/ls -l /data/home"}),watch:{},methods:{onReset(){this.$message.success("重置成功")},onSubmit({result:s,firstError:a,e:r}){r.preventDefault();const n=new e;n.command=this.textareaValue,n.clients=["9.134.1.58"],this.$request.post("http://9.134.1.58:8889/runshell",n,{timeout:1e5,retry:0}).then((e=>{if(!t(e.data))return void this.$message.warning("错误的回包");const s=e.data.body;console.log(`taskid ${s}`);const a=this.$router.resolve({path:"/runshell/output",query:{taskid:s}});window.open(a.href,"_blank")})).catch((function(t){console.log(t)})),void 0===s||!0===s?this.$message.success("运行成功"):this.$message.warning(a)}}},a,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title-container"},[e("img",{staticClass:"icon",attrs:{src:"https://tdesign.gtimg.com/pro-template/logo%402x.png"}})])}],!1,(function(t){for(let e in r)this[e]=r[e]}),null,null,null).exports;export default n;
